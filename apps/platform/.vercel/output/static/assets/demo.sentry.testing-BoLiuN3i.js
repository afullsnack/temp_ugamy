import{r as x,j as s,D as be,E as xe}from"./main-sOPGwSMr.js";const _=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,y=globalThis,A="9.38.0";function D(){return q(y),y}function q(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||A,e[A]=e[A]||{}}function Z(t,e,n=y){const r=n.__SENTRY__=n.__SENTRY__||{},i=r[A]=r[A]||{};return i[t]||(i[t]=e())}const ze="Sentry Logger ",ie={};function ve(t){if(!("console"in y))return t();const e=y.console,n={},r=Object.keys(ie);r.forEach(i=>{const a=ie[i];n[i]=e[i],e[i]=a});try{return t()}finally{r.forEach(i=>{e[i]=n[i]})}}function Ke(){ee().enabled=!0}function Xe(){ee().enabled=!1}function ye(){return ee().enabled}function He(...t){Q("log",...t)}function Ve(...t){Q("warn",...t)}function qe(...t){Q("error",...t)}function Q(t,...e){_&&ye()&&ve(()=>{y.console[t](`${ze}[${t}]:`,...e)})}function ee(){return _?Z("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const g={enable:Ke,disable:Xe,isEnabled:ye,log:He,warn:Ve,error:qe},Ze=Object.prototype.toString;function Ee(t,e){return Ze.call(t)===`[object ${e}]`}function Qe(t){return Ee(t,"String")}function et(t){return Ee(t,"Object")}function Ne(t){return!!(t!=null&&t.then&&typeof t.then=="function")}function tt(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function C(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{_&&g.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function nt(){const t=y;return t.crypto||t.msCrypto}function j(t=nt()){let e=()=>Math.random()*16;try{if(t!=null&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t!=null&&t.getRandomValues&&(e=()=>{const n=new Uint8Array(1);return t.getRandomValues(n),n[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,n=>(n^(e()&15)>>n/4).toString(16))}const Te=1e3;function Ie(){return Date.now()/Te}function rt(){const{performance:t}=y;if(!(t!=null&&t.now)||!t.timeOrigin)return Ie;const e=t.timeOrigin;return()=>(e+t.now())/Te}let ae;function M(){return(ae??(ae=rt()))()}function st(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||M(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:j()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function je(t,e,n=2){if(!e||typeof e!="object"||n<=0)return e;if(t&&Object.keys(e).length===0)return t;const r={...t};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=je(r[i],e[i],n-1));return r}function F(){return j()}function we(){return j().substring(16)}const W="_sentrySpan";function $(t,e){e?C(t,W,e):delete t[W]}function z(t){return t[W]}const it=100;class N{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:F(),sampleRand:Math.random()}}clone(){const e=new N;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,$(e,z(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&st(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,r=n instanceof N?n.getScopeData():et(n)?e:void 0,{tags:i,extra:a,user:o,contexts:c,level:l,fingerprint:u=[],propagationContext:p}=r||{};return this._tags={...this._tags,...i},this._extra={...this._extra,...a},this._contexts={...this._contexts,...c},o&&Object.keys(o).length&&(this._user=o),l&&(this._level=l),u.length&&(this._fingerprint=u),p&&(this._propagationContext=p),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,$(this,void 0),this._attachments=[],this.setPropagationContext({traceId:F(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,n){var a;const r=typeof n=="number"?n:it;if(r<=0)return this;const i={timestamp:Ie(),...e,message:e.message?tt(e.message,2048):e.message};return this._breadcrumbs.push(i),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),(a=this._client)==null||a.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:z(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=je(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=(n==null?void 0:n.event_id)||j();if(!this._client)return _&&g.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...n,event_id:r},this),r}captureMessage(e,n,r){const i=(r==null?void 0:r.event_id)||j();if(!this._client)return _&&g.warn("No client configured on scope - will not capture message!"),i;const a=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:a,...r,event_id:i},this),i}captureEvent(e,n){const r=(n==null?void 0:n.event_id)||j();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(_&&g.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function at(){return Z("defaultCurrentScope",()=>new N)}function ot(){return Z("defaultIsolationScope",()=>new N)}class ct{constructor(e,n){let r;e?r=e:r=new N;let i;n?i=n:i=new N,this._stack=[{scope:r}],this._isolationScope=i}withScope(e){const n=this._pushScope();let r;try{r=e(n)}catch(i){throw this._popScope(),i}return Ne(r)?r.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function R(){const t=D(),e=q(t);return e.stack=e.stack||new ct(at(),ot())}function dt(t){return R().withScope(t)}function lt(t,e){const n=R();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function oe(t){return R().withScope(()=>t(R().getIsolationScope()))}function ut(){return{withIsolationScope:oe,withScope:dt,withSetScope:lt,withSetIsolationScope:(t,e)=>oe(e),getCurrentScope:()=>R().getScope(),getIsolationScope:()=>R().getIsolationScope()}}function Y(t){const e=q(t);return e.acs?e.acs:ut()}function G(){const t=D();return Y(t).getCurrentScope()}function Ce(){const t=D();return Y(t).getIsolationScope()}function Re(...t){const e=D(),n=Y(e);if(t.length===2){const[r,i]=t;return r?n.withSetScope(r,i):n.withScope(i)}return n.withScope(t[0])}function T(){return G().getClient()}const U="sentry.source",Ae="sentry.sample_rate",pt="sentry.previous_trace_sample_rate",K="sentry.op",X="sentry.origin",ht="sentry.measurement_unit",mt="sentry.measurement_value",ce="sentry.custom_span_name",ft="sentry.profile_id",_t="sentry.exclusive_time",gt=0,St=1,bt=2,ke="_sentryScope",De="_sentryIsolationScope";function xt(t,e,n){t&&(C(t,De,n),C(t,ke,e))}function H(t){return{scope:t[ke],isolationScope:t[De]}}const vt="sentry-",yt=/^sentry-/;function Et(t){const e=Nt(t);if(!e)return;const n=Object.entries(e).reduce((r,[i,a])=>{if(i.match(yt)){const o=i.slice(vt.length);r[o]=a}return r},{});if(Object.keys(n).length>0)return n}function Nt(t){if(!(!t||!Qe(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,n)=>{const r=de(n);return Object.entries(r).forEach(([i,a])=>{e[i]=a}),e},{}):de(t)}function de(t){return t.split(",").map(e=>e.split("=").map(n=>{try{return decodeURIComponent(n.trim())}catch{return}})).reduce((e,[n,r])=>(n&&r&&(e[n]=r),e),{})}function Oe(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;if(!(typeof e!="number"||isNaN(e)||e<0||e>1))return e}const Pe=0,te=1;let le=!1;function Tt(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:i,parent_span_id:a,status:o,origin:c,links:l}=S(t);return{parent_span_id:a,span_id:e,trace_id:n,data:r,op:i,status:o,origin:c,links:l}}function Le(t){if(t&&t.length>0)return t.map(({context:{spanId:e,traceId:n,traceFlags:r,...i},attributes:a})=>({span_id:e,trace_id:n,sampled:r===te,attributes:a,...i}))}function w(t){return typeof t=="number"?ue(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?ue(t.getTime()):M()}function ue(t){return t>9999999999?t/1e3:t}function S(t){var r;if(jt(t))return t.getSpanJSON();const{spanId:e,traceId:n}=t.spanContext();if(It(t)){const{attributes:i,startTime:a,name:o,endTime:c,status:l,links:u}=t,p="parentSpanId"in t?t.parentSpanId:"parentSpanContext"in t?(r=t.parentSpanContext)==null?void 0:r.spanId:void 0;return{span_id:e,trace_id:n,data:i,description:o,parent_span_id:p,start_timestamp:w(a),timestamp:w(c)||void 0,status:Me(l),op:i[K],origin:i[X],links:Le(u)}}return{span_id:e,trace_id:n,start_timestamp:0,data:{}}}function It(t){const e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function jt(t){return typeof t.getSpanJSON=="function"}function O(t){const{traceFlags:e}=t.spanContext();return e===te}function Me(t){if(!(!t||t.code===gt))return t.code===St?"ok":t.message||"unknown_error"}const k="_sentryChildSpans",V="_sentryRootSpan";function Fe(t,e){const n=t[V]||t;C(e,V,n),t[k]?t[k].add(e):C(t,k,new Set([e]))}function wt(t){const e=new Set;function n(r){if(!e.has(r)&&O(r)){e.add(r);const i=r[k]?Array.from(r[k]):[];for(const a of i)n(a)}}return n(t),Array.from(e)}function E(t){return t[V]||t}function Ct(){le||(ve(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),le=!0)}function ne(t){var n;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=t||((n=T())==null?void 0:n.getOptions());return!!e&&(e.tracesSampleRate!=null||!!e.tracesSampler)}const Rt="production",At=/^o(\d+)\./;function kt(t,e=!1){const{host:n,path:r,pass:i,port:a,projectId:o,protocol:c,publicKey:l}=t;return`${c}://${l}${e&&i?`:${i}`:""}@${n}${a?`:${a}`:""}/${r&&`${r}/`}${o}`}function Dt(t){const e=t.match(At);return e==null?void 0:e[1]}const $e="_frozenDsc";function J(t,e){C(t,$e,e)}function Ot(t,e){const n=e.getOptions(),{publicKey:r,host:i}=e.getDsn()||{};let a;n.orgId?a=String(n.orgId):i&&(a=Dt(i));const o={environment:n.environment||Rt,release:n.release,public_key:r,trace_id:t,org_id:a};return e.emit("createDsc",o),o}function B(t){var v;const e=T();if(!e)return{};const n=E(t),r=S(n),i=r.data,a=n.spanContext().traceState,o=(a==null?void 0:a.get("sentry.sample_rate"))??i[Ae]??i[pt];function c(I){return(typeof o=="number"||typeof o=="string")&&(I.sample_rate=`${o}`),I}const l=n[$e];if(l)return c(l);const u=a==null?void 0:a.get("sentry.dsc"),p=u&&Et(u);if(p)return c(p);const h=Ot(t.spanContext().traceId,e),m=i[U],f=r.description;return m!=="url"&&f&&(h.transaction=f),ne()&&(h.sampled=String(O(n)),h.sample_rand=(a==null?void 0:a.get("sentry.sample_rand"))??((v=H(n).scope)==null?void 0:v.getPropagationContext().sampleRand.toString())),c(h),e.emit("createDsc",h,n),h}class re{constructor(e={}){this._traceId=e.traceId||F(),this._spanId=e.spanId||we()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:Pe}}end(e){}setAttribute(e,n){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,n,r){return this}addLink(e){return this}addLinks(e){return this}recordException(e,n){}}function Pt(t,e,n=()=>{}){let r;try{r=t()}catch(i){throw e(i),n(),i}return Lt(r,e,n)}function Lt(t,e,n){return Ne(t)?t.then(r=>(n(),r),r=>{throw e(r),n(),r}):(n(),t)}function Mt(t){if(!_)return;const{description:e="< unknown name >",op:n="< unknown op >",parent_span_id:r}=S(t),{spanId:i}=t.spanContext(),a=O(t),o=E(t),c=o===t,l=`[Tracing] Starting ${a?"sampled":"unsampled"} ${c?"root ":""}span`,u=[`op: ${n}`,`name: ${e}`,`ID: ${i}`];if(r&&u.push(`parent ID: ${r}`),!c){const{op:p,description:h}=S(o);u.push(`root ID: ${o.spanContext().spanId}`),p&&u.push(`root op: ${p}`),h&&u.push(`root description: ${h}`)}g.log(`${l}
  ${u.join(`
  `)}`)}function Ft(t){if(!_)return;const{description:e="< unknown name >",op:n="< unknown op >"}=S(t),{spanId:r}=t.spanContext(),a=E(t)===t,o=`[Tracing] Finishing "${n}" ${a?"root ":""}span "${e}" with ID ${r}`;g.log(o)}function $t(t,e,n){if(!ne(t))return[!1];let r,i;typeof t.tracesSampler=="function"?(i=t.tracesSampler({...e,inheritOrSampleWith:c=>typeof e.parentSampleRate=="number"?e.parentSampleRate:typeof e.parentSampled=="boolean"?Number(e.parentSampled):c}),r=!0):e.parentSampled!==void 0?i=e.parentSampled:typeof t.tracesSampleRate<"u"&&(i=t.tracesSampleRate,r=!0);const a=Oe(i);if(a===void 0)return _&&g.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(i)} of type ${JSON.stringify(typeof i)}.`),[!1];if(!a)return _&&g.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,a,r];const o=n<a;return o||_&&g.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(i)})`),[o,a,r]}function Ut(t,e=[]){return[t,e]}function Bt(t){return[{type:"span"},t]}function Yt(t,e){function n(p){return!!p.trace_id&&!!p.public_key}const r=B(t[0]),i=e==null?void 0:e.getDsn(),a=e==null?void 0:e.getOptions().tunnel,o={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!a&&i&&{dsn:kt(i)}},c=e==null?void 0:e.getOptions().beforeSendSpan,l=c?p=>{const h=S(p),m=c(h);return m||(Ct(),h)}:S,u=[];for(const p of t){const h=l(p);h&&u.push(Bt(h))}return Ut(o,u)}function pe(t){if(!t||t.length===0)return;const e={};return t.forEach(n=>{const r=n.attributes||{},i=r[ht],a=r[mt];typeof i=="string"&&typeof a=="number"&&(e[n.name]={value:a,unit:i})}),e}const he=1e3;class se{constructor(e={}){this._traceId=e.traceId||F(),this._spanId=e.spanId||we(),this._startTime=e.startTimestamp||M(),this._links=e.links,this._attributes={},this.setAttributes({[X]:"manual",[K]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,n){}spanContext(){const{_spanId:e,_traceId:n,_sampled:r}=this;return{spanId:e,traceId:n,traceFlags:r?te:Pe}}setAttribute(e,n){return n===void 0?delete this._attributes[e]:this._attributes[e]=n,this}setAttributes(e){return Object.keys(e).forEach(n=>this.setAttribute(n,e[n])),this}updateStartTime(e){this._startTime=w(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(U,"custom"),this}end(e){this._endTime||(this._endTime=w(e),Ft(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[K],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Me(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[X],profile_id:this._attributes[ft],exclusive_time:this._attributes[_t],measurements:pe(this._events),is_segment:this._isStandaloneSpan&&E(this)===this||void 0,segment_id:this._isStandaloneSpan?E(this).spanContext().spanId:void 0,links:Le(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,n,r){_&&g.log("[Tracing] Adding an event to span:",e);const i=me(n)?n:r||M(),a=me(n)?{}:n||{},o={name:e,time:w(i),attributes:a};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=T();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===E(this)))return;if(this._isStandaloneSpan){this._sampled?Jt(Yt([this],e)):(_&&g.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(H(this).scope||G()).captureEvent(r)}_convertSpanToTransaction(){var p;if(!fe(S(this)))return;this._name||(_&&g.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:n}=H(this),r=(p=e==null?void 0:e.getScopeData().sdkProcessingMetadata)==null?void 0:p.normalizedRequest;if(this._sampled!==!0)return;const a=wt(this).filter(h=>h!==this&&!Gt(h)).map(h=>S(h)).filter(fe),o=this._attributes[U];delete this._attributes[ce],a.forEach(h=>{delete h.data[ce]});const c={contexts:{trace:Tt(this)},spans:a.length>he?a.sort((h,m)=>h.start_timestamp-m.start_timestamp).slice(0,he):a,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:n,dynamicSamplingContext:B(this)},request:r,...o&&{transaction_info:{source:o}}},l=pe(this._events);return l&&Object.keys(l).length&&(_&&g.log("[Measurements] Adding measurements to transaction event",JSON.stringify(l,void 0,2)),c.measurements=l),c}}function me(t){return t&&typeof t=="number"||t instanceof Date||Array.isArray(t)}function fe(t){return!!t.start_timestamp&&!!t.timestamp&&!!t.span_id&&!!t.trace_id}function Gt(t){return t instanceof se&&t.isStandaloneSpan()}function Jt(t){const e=T();if(!e)return;const n=t[1];if(!n||n.length===0){e.recordDroppedEvent("before_send","span");return}e.sendEnvelope(t)}const Ue="__SENTRY_SUPPRESS_TRACING__";function L(t,e){const n=Be();if(n.startSpan)return n.startSpan(t,e);const r=Kt(t),{forceTransaction:i,parentSpan:a,scope:o}=t,c=o==null?void 0:o.clone();return Re(c,()=>Vt(a)(()=>{const u=G(),p=Ht(u,a),m=t.onlyIfParent&&!p?new re:zt({parentSpan:p,spanArguments:r,forceTransaction:i,scope:u});return $(u,m),Pt(()=>e(m),()=>{const{status:f}=S(m);m.isRecording()&&(!f||f==="ok")&&m.setStatus({code:bt,message:"internal_error"})},()=>{m.end()})}))}function Wt(t,e){const n=Be();return n.withActiveSpan?n.withActiveSpan(t,e):Re(r=>($(r,t||void 0),e(r)))}function zt({parentSpan:t,spanArguments:e,forceTransaction:n,scope:r}){if(!ne()){const o=new re;if(n||!t){const c={sampled:"false",sample_rate:"0",transaction:e.name,...B(o)};J(o,c)}return o}const i=Ce();let a;if(t&&!n)a=Xt(t,r,e),Fe(t,a);else if(t){const o=B(t),{traceId:c,spanId:l}=t.spanContext(),u=O(t);a=_e({traceId:c,parentSpanId:l,...e},r,u),J(a,o)}else{const{traceId:o,dsc:c,parentSpanId:l,sampled:u}={...i.getPropagationContext(),...r.getPropagationContext()};a=_e({traceId:o,parentSpanId:l,...e},r,u),c&&J(a,c)}return Mt(a),xt(a,r,i),a}function Kt(t){const n={isStandalone:(t.experimental||{}).standalone,...t};if(t.startTime){const r={...n};return r.startTimestamp=w(t.startTime),delete r.startTime,r}return n}function Be(){const t=D();return Y(t)}function _e(t,e,n){var v;const r=T(),i=(r==null?void 0:r.getOptions())||{},{name:a=""}=t,o={spanAttributes:{...t.attributes},spanName:a,parentSampled:n};r==null||r.emit("beforeSampling",o,{decision:!1});const c=o.parentSampled??n,l=o.spanAttributes,u=e.getPropagationContext(),[p,h,m]=e.getScopeData().sdkProcessingMetadata[Ue]?[!1]:$t(i,{name:a,parentSampled:c,attributes:l,parentSampleRate:Oe((v=u.dsc)==null?void 0:v.sample_rate)},u.sampleRand),f=new se({...t,attributes:{[U]:"custom",[Ae]:h!==void 0&&m?h:void 0,...l},sampled:p});return!p&&r&&(_&&g.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",f),f}function Xt(t,e,n){const{spanId:r,traceId:i}=t.spanContext(),a=e.getScopeData().sdkProcessingMetadata[Ue]?!1:O(t),o=a?new se({...n,parentSpanId:r,traceId:i,sampled:a}):new re({traceId:i});Fe(t,o);const c=T();return c&&(c.emit("spanStart",o),n.endTimestamp&&c.emit("spanEnd",o)),o}function Ht(t,e){if(e)return e;if(e===null)return;const n=z(t);if(!n)return;const r=T();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?E(n):n}function Vt(t){return t!==void 0?e=>Wt(t,e):e=>e()}function ge(t,e){return G().captureException(t,void 0)}function Se(t,e){Ce().setContext(t,e)}const qt=xe("src_routes_demo_sentry_testing_tsx--badServerFunc_createServerFn_handler","/_serverFn"),Zt=be({method:"GET"}).handler(qt),Qt=xe("src_routes_demo_sentry_testing_tsx--goodServerFunc_createServerFn_handler","/_serverFn"),en=be({method:"GET"}).handler(Qt),nn=function(){const[e,n]=x.useState({}),[r,i]=x.useState({}),[a,o]=x.useState({}),[c,l]=x.useState({}),[u,p]=x.useState(0),[h,m]=x.useState([]),[f,v]=x.useState(null),I=x.useRef("");x.useEffect(()=>{if(I.current||(I.current=new Date().toISOString()),u>0){const d=((new Date().getTime()-new Date(I.current).getTime())/1e3).toFixed(1);m(b=>[...b,`Step ${u}: +${d}s`])}},[u]);const P=d=>{navigator.clipboard.writeText(d),v(d),setTimeout(()=>v(null),2e3)},Ye=async()=>{n(d=>({...d,clientError:!0})),i(d=>({...d,clientError:!1})),o(d=>({...d,clientError:!0}));try{await L({name:"Client Error Flow Demo",op:"demo.client-error-flow"},async()=>{throw Se("demo",{feature:"client-error-demo",triggered_at:new Date().toISOString()}),new Error("Client-side error demonstration")})}catch(d){i(b=>({...b,clientError:!0})),l(b=>({...b,clientError:"demo.client-error-flow"})),ge(d)}finally{n(d=>({...d,clientError:!1}))}},Ge=async()=>{n(d=>({...d,serverError:!0})),i(d=>({...d,serverError:!1})),o(d=>({...d,serverError:!0}));try{await L({name:"Server Error Flow Demo",op:"demo.server-error-flow"},async()=>{Se("demo",{feature:"server-error-demo",triggered_at:new Date().toISOString()}),await Zt()})}catch(d){i(b=>({...b,serverError:!0})),l(b=>({...b,serverError:"demo.server-error-flow"})),ge(d)}finally{n(d=>({...d,serverError:!1}))}},Je=async()=>{n(d=>({...d,client:!0})),o(d=>({...d,client:!0})),await L({name:"Client Operation",op:"demo.client"},async()=>{await new Promise(d=>setTimeout(d,1e3))}),l(d=>({...d,client:"demo.client"})),n(d=>({...d,client:!1}))},We=async()=>{n(d=>({...d,server:!0})),o(d=>({...d,server:!0}));try{await L({name:"Server Operation",op:"demo.server"},async()=>{await en()}),l(d=>({...d,server:"demo.server"}))}finally{n(d=>({...d,server:!1}))}};return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-10px); }
          }
          .animate-fade-out {
            animation: fadeOut 2s ease-out forwards;
          }
        `}}),s.jsx("div",{className:"min-h-[calc(100vh-32px)] text-white p-8",style:{backgroundImage:"radial-gradient(41.11% 49.93% at 50% 49.93%, #8d5494 0%, #563275 52.26%, #1f1633 100%)"},children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h1",{className:"text-8xl font-bold mb-4 text-white",children:"Sentry"}),s.jsxs("p",{className:"text-4xl font-semibold text-white",children:["Code ",s.jsx("span",{className:"inline-block -rotate-9",children:"breaks"}),", fix it faster"]})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"bg-[#1C2333] rounded-lg border border-gray-800 p-6",children:s.jsxs("div",{className:"space-y-4 text-gray-300",children:[s.jsxs("p",{children:["The Sentry integration monitors this application across all routes; not just this one (we care about all tabs) using our"," ",s.jsx("code",{children:"@sentry/react"})," and ",s.jsx("code",{children:"@sentry/node"})," ","packages."]}),s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-[#2D3555] rounded-lg p-4 border border-gray-700 hover:border-purple-500/50 transition-colors",children:[s.jsx("div",{className:"font-bold mb-1",children:"Error Monitoring"}),s.jsx("div",{className:"text-sm text-gray-400",children:"across client side and server functions"})]}),s.jsxs("div",{className:"bg-[#2D3555] rounded-lg p-4 border border-gray-700 hover:border-purple-500/50 transition-colors",children:[s.jsx("div",{className:"font-bold mb-1",children:"Tracing and Spans"}),s.jsx("div",{className:"text-sm text-gray-400",children:"for client and server side performance"})]}),s.jsxs("div",{className:"bg-[#2D3555] rounded-lg p-4 border border-gray-700 hover:border-purple-500/50 transition-colors",children:[s.jsx("div",{className:"font-bold mb-1",children:"Session replay"}),s.jsx("div",{className:"text-sm text-gray-400",children:"real user session playback"})]}),s.jsxs("div",{className:"bg-[#2D3555] rounded-lg p-4 border border-gray-700 hover:border-purple-500/50 transition-colors",children:[s.jsx("div",{className:"font-bold mb-1",children:"Real-time alerts"}),s.jsx("div",{className:"text-sm text-gray-400",children:"because sleep is overrated anyway"})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-[#1C2333] rounded-lg p-6 border border-gray-800",children:[s.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Client-Side Testing"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>{p(d=>d+1),Ye()},className:"w-full text-white rounded-md p-4 relative overflow-hidden group",style:{background:"linear-gradient(120deg, #c83852, #b44092 25%, #6a5fc1 50%, #452650 55%, #452650)",backgroundPosition:"2% 0",backgroundSize:"250% 100%"},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/10 to-orange-500/10 opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"relative",children:s.jsx("div",{className:"flex items-center mb-2",children:s.jsx("span",{className:"font-medium",children:"Trigger Client-Side Error"})})})]}),r.clientError&&s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsx("div",{className:"bg-red-900/20 border border-red-500/50 rounded-lg p-2",children:s.jsxs("div",{className:"flex items-center text-red-400 text-sm",children:[s.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("title",{children:"Red Warning Sign"}),s.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]}),"Client-side error captured and traced"]})}),s.jsx("div",{className:"bg-purple-900/20 border border-purple-500/50 rounded-lg p-3",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",className:`inline-flex items-center bg-purple-900/40 px-3 py-1.5 rounded-lg border border-purple-500/50 cursor-pointer hover:bg-purple-900/60 transition-all ${f===c.clientError?"scale-95":""}`,onClick:()=>P(c.clientError),title:"Click to copy operation name",children:[s.jsx("span",{className:"text-purple-300 text-sm font-medium mr-2",children:"span.op"}),s.jsx("code",{className:"text-purple-400 text-sm font-mono",children:c.clientError})]}),f===c.clientError&&s.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-green-500/90 text-white text-xs px-2 py-1 rounded animate-fade-out",children:"Copied!"})]})})})]})]}),s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>{p(d=>d+1),Je()},className:"w-full text-white rounded-md p-4 relative overflow-hidden group",style:{background:"linear-gradient(120deg, #c83852, #b44092 25%, #6a5fc1 50%, #452650 55%, #452650)",backgroundPosition:"2% 0",backgroundSize:"250% 100%"},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"relative",children:s.jsx("div",{className:"flex items-center mb-2",children:s.jsx("span",{className:"font-medium",children:"Test Client-Side Span"})})})]}),a.client&&s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${e.client?"bg-blue-500 animate-pulse":"bg-green-500"}`}),s.jsx("div",{className:"ml-2 flex-1",children:s.jsx("div",{className:"h-1.5 bg-[#2D3555] rounded",children:s.jsx("div",{className:"h-full bg-blue-500 rounded transition-all duration-500",style:{width:e.client?"60%":"100%"}})})})]}),!e.client&&c.client&&s.jsx("div",{className:"bg-purple-900/20 border border-purple-500/50 rounded-lg p-3",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",className:`inline-flex items-center bg-purple-900/40 px-3 py-1.5 rounded-lg border border-purple-500/50 cursor-pointer hover:bg-purple-900/60 transition-all ${f===c.client?"scale-95":""}`,onClick:()=>P(c.client),title:"Click to copy operation name",children:[s.jsx("span",{className:"text-purple-300 text-sm font-medium mr-2",children:"span.op"}),s.jsx("code",{className:"text-purple-400 text-sm font-mono",children:c.client})]}),f===c.client&&s.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-green-500/90 text-white text-xs px-2 py-1 rounded animate-fade-out",children:"Copied!"})]})})})]})]})]})]}),s.jsxs("div",{className:"bg-[#1C2333] rounded-lg p-6 border border-gray-800",children:[s.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Server-Side Testing"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>{p(d=>d+1),Ge()},className:"w-full text-white rounded-md p-4 relative overflow-hidden group",style:{background:"linear-gradient(120deg, #c83852, #b44092 25%, #6a5fc1 50%, #452650 55%, #452650)",backgroundPosition:"2% 0",backgroundSize:"250% 100%"},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/10 to-orange-500/10 opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"relative",children:s.jsx("div",{className:"flex items-center mb-2",children:s.jsx("span",{className:"font-medium",children:"Trigger Server Error"})})})]}),r.serverError&&s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsx("div",{className:"bg-red-900/20 border border-red-500/50 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-center text-red-400 text-sm",children:[s.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("title",{children:"Red Warning Sign"}),s.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]}),"Server-side error captured and traced"]})}),s.jsx("div",{className:"bg-purple-900/20 border border-purple-500/50 rounded-lg p-3",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",className:`inline-flex items-center bg-purple-900/40 px-3 py-1.5 rounded-lg border border-purple-500/50 cursor-pointer hover:bg-purple-900/60 transition-all ${f===c.serverError?"scale-95":""}`,onClick:()=>P(c.serverError),title:"Click to copy operation name",children:[s.jsx("span",{className:"text-purple-300 text-sm font-medium mr-2",children:"span.op"}),s.jsx("code",{className:"text-purple-400 text-sm font-mono",children:c.serverError})]}),f===c.serverError&&s.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-green-500/90 text-white text-xs px-2 py-1 rounded animate-fade-out",children:"Copied!"})]})})})]})]}),s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>{p(d=>d+1),We()},className:"w-full text-white rounded-md p-4 relative overflow-hidden group",style:{background:"linear-gradient(120deg, #c83852, #b44092 25%, #6a5fc1 50%, #452650 55%, #452650)",backgroundPosition:"2% 0",backgroundSize:"250% 100%"},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"relative",children:s.jsx("div",{className:"flex items-center mb-2",children:s.jsx("span",{className:"font-medium",children:"Test server Trace"})})})]}),a.server&&s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${e.server?"bg-purple-500 animate-pulse":"bg-green-500"}`}),s.jsx("div",{className:"ml-2 flex-1",children:s.jsx("div",{className:"h-1.5 bg-[#2D3555] rounded",children:s.jsx("div",{className:"h-full bg-purple-500 rounded transition-all duration-500",style:{width:e.server?"60%":"100%"}})})})]}),!e.server&&c.server&&s.jsx("div",{className:"bg-purple-900/20 border border-purple-500/50 rounded-lg p-3",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",className:`inline-flex items-center bg-purple-900/40 px-3 py-1.5 rounded-lg border border-purple-500/50 cursor-pointer hover:bg-purple-900/60 transition-all ${f===c.server?"scale-95":""}`,onClick:()=>P(c.server),title:"Click to copy operation name",children:[s.jsx("span",{className:"text-purple-300 text-sm font-medium mr-2",children:"span.op"}),s.jsx("code",{className:"text-purple-400 text-sm font-mono",children:c.server})]}),f===c.server&&s.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-green-500/90 text-white text-xs px-2 py-1 rounded animate-fade-out",children:"Copied!"})]})})})]})]})]})]})]})]})]})})]})};export{nn as component};
