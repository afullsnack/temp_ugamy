import{j as e,u as f,a as p,o as h,t as i,L as g,b as l,s as j}from"./main-sOPGwSMr.js";import{u as y,a as b,F as v,b as N,c as C,d as w,e as F,f as V}from"./form-DhAcqq7L.js";import{u as E}from"./index-CchxzTSw.js";import{c as o,B as d}from"./button-CKUIHMt9.js";import{I as S}from"./input-PxwkBy-0.js";import{B as k}from"./brand-logo-dark-CWU05QYZ.js";function B({className:r,...s}){return e.jsx("div",{"data-slot":"card",className:o("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),...s})}function L({className:r,...s}){return e.jsx("div",{"data-slot":"card-header",className:o("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...s})}function O({className:r,...s}){return e.jsx("div",{"data-slot":"card-title",className:o("leading-none font-semibold",r),...s})}function P({className:r,...s}){return e.jsx("div",{"data-slot":"card-description",className:o("text-muted-foreground text-sm",r),...s})}function T({className:r,...s}){return e.jsx("div",{"data-slot":"card-content",className:o("px-6",r),...s})}function A({className:r,...s}){return e.jsx("div",{"data-slot":"card-footer",className:o("flex items-center px-6 [.border-t]:pt-6",r),...s})}const D=h({code:j().min(6,{message:"Verification code must be 6 characters."}).max(6,{message:"Verification code must be 6 characters."}).regex(/^\d{6}$/,{message:"Verification code must be 6 digits."})}),I=async r=>{const{data:s,error:t}=await l.emailOtp.verifyEmail({email:r.email,otp:r.code});if(t)throw t;return s};function R(){const r=f(),s=p({from:"/verify-email"}),t=y({resolver:b(D),defaultValues:{code:""}}),m=async()=>{if(!s.email){i.error("Enter email address");return}const{data:a,error:c}=await l.emailOtp.sendVerificationOtp({email:`${s.email}`,type:"email-verification"});a!=null&&a.success&&i.success(`OTP has been sent to: ${s.email}`),c&&i.error(c.message??"Error sending OTP")},{isPending:n,mutateAsync:u}=E({mutationFn:I,onSuccess:()=>{i.success("Proceed to sign in"),r({to:"/signin"})},onError:a=>{i.error(a.message||"An unexpected error occured, kindly try again")}}),x=async a=>{await u({code:a.code,email:s.email??""})};return e.jsxs(B,{className:"w-full max-w-md",children:[e.jsxs(L,{className:"space-y-1 text-center",children:[e.jsx(O,{className:"text-2xl",children:"Verify your email"}),e.jsxs(P,{children:["We've sent a 6-digit code to your email address ",e.jsx("span",{className:"text-black",children:s.email}),". Please enter it below to verify your account."]})]}),e.jsx(T,{children:e.jsx(v,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(x),className:"space-y-4",children:[e.jsx(N,{control:t.control,name:"code",render:({field:a})=>e.jsxs(C,{children:[e.jsx(w,{children:"Verification Code"}),e.jsx(F,{children:e.jsx(S,{placeholder:"123456",...a})}),e.jsx(V,{})]})}),e.jsx(d,{type:"submit",disabled:n,className:"w-full h-[50px]",children:n?"Verifying Account...":" Verify Account"})]})})}),e.jsxs(A,{className:"flex flex-col gap-2 text-sm",children:[e.jsxs("p",{className:"text-muted-foreground",children:["Didn't receive the code?"," ",e.jsx(d,{type:"button",variant:"link",onClick:m,className:"font-medium text-primary hover:underline p-0",children:"Resend Code"})]}),e.jsx("p",{className:"text-muted-foreground",children:e.jsx(g,{to:"/signin",className:"font-medium text-primary hover:underline",children:"Back to Login"})})]})]})}const z=function(){return e.jsxs("div",{className:"bg-white flex flex-col min-h-screen items-center justify-start space-y-[32px] pt-[100px] px-4 pb-4",children:[e.jsx(k,{}),e.jsx(R,{})]})};export{z as component};
